<!DOCTYPE html>
<html>
<head>
  <title>
    
    Ruby one liners for simple problems | Yatish Mehta
    
  </title>
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="/assets/app-27e124204a3471b7924b8ea7f6b3a2d4.css">
  <link rel="alternate" href=http://www.yatishmehta.com/feed/" type="application/rss+xml" />

  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
              (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-55193411-1', 'auto');
    ga('send', 'pageview');

  </script>
</head>
<body>

<div class="container">
  <header>
    <ul class="nav">
      <li><a href="/about">About</a></li>
      <li><a href="/links">Links</a></li>
      <li class="logo"><a href="/">Y</a></li>
      <li><a href="/">Blogs</a></li>
      <li><a href="/code">Code</a></li>
    </ul>
  </header>

  
<p class="cover-pic">
    <img src="/assets/ruby-oneliner-c9c67fe0a928a3cbdf809a4e53540f9d.png">
</p>


<h1 class="words">Ruby one liners for simple problems</h1>
<div class="author">
    Yatish Mehta
    <a href="https://github.com/yatish27" target="_blank"><i class="fa fa-github"></i></a>
    <a href="https://twitter.com/yatish27" target="_blank"><i class="fa fa-twitter"></i></a>
    <a href="https://www.linkedin.com/in/yatish27" target="_blank"><i class="fa fa-linkedin"></i></a>
</div>
<p class="date">April 29, 2014</p>

<p>Ruby is one of the most flexible, purely object-oriented language. As a code craftsman, one falls for its elegance and beauty. Recently, I was conducting a training program for beginners in Ruby programming.</p>

<p>We decide to solve the following problems</p>

<ul>
<li>Prime number detection</li>
<li>Factorial calculation</li>
<li>Fibonacci Series</li>
<li>Palindrome detection</li>
<li>Pascal triangle calculation</li>
<li>Sentence reversal.</li>
</ul>


<p>We came up with ruby one liners to try to solve these problems</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="k">def</span> <span class="nf">prime?</span><span class="p">(</span><span class="n">num</span><span class="p">)</span>
  <span class="p">(</span><span class="mi">2</span><span class="o">.</span><span class="n">.</span><span class="no">Math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">num</span><span class="p">))</span><span class="o">.</span><span class="n">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">int</span><span class="o">|</span> <span class="k">return</span> <span class="kp">false</span> <span class="k">if</span> <span class="n">num</span> <span class="o">%</span> <span class="n">int</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">}</span>
  <span class="kp">true</span>
<span class="k">end</span>

<span class="c1"># Returns factorial of the *num*</span>
<span class="k">def</span> <span class="nf">factorial</span><span class="p">(</span><span class="n">num</span><span class="p">)</span>
  <span class="p">(</span><span class="mi">1</span><span class="o">.</span><span class="n">.num</span><span class="p">)</span><span class="o">.</span><span class="n">reduce</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span> <span class="o">|</span><span class="n">fact</span><span class="p">,</span> <span class="n">item</span><span class="o">|</span> <span class="n">fact</span> <span class="o">*</span> <span class="n">item</span> <span class="p">}</span>
<span class="k">end</span>

<span class="c1"># Returns an array of fibonnaci series</span>
<span class="k">def</span> <span class="nf">fibonnaci</span><span class="p">(</span><span class="n">num</span><span class="p">)</span>
  <span class="p">(</span><span class="mi">1</span><span class="o">.</span><span class="n">.num</span> <span class="o">-</span> <span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">reduce</span><span class="p">(</span><span class="o">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="o">]</span><span class="p">)</span> <span class="p">{</span> <span class="o">|</span><span class="n">fact</span><span class="o">|</span> <span class="n">fact</span> <span class="o">&lt;&lt;</span> <span class="n">fact</span><span class="o">[-</span><span class="mi">1</span><span class="o">]</span> <span class="o">+</span> <span class="n">fact</span><span class="o">[-</span><span class="mi">2</span><span class="o">]</span> <span class="p">}</span>
<span class="k">end</span>

<span class="c1"># Returns true if the binary of *num* is a palindrome</span>
<span class="k">def</span> <span class="nf">palindrome?</span><span class="p">(</span><span class="n">num</span><span class="p">)</span>
  <span class="n">num</span><span class="o">.</span><span class="n">to_s</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">==</span> <span class="n">num</span><span class="o">.</span><span class="n">to_s</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">reverse</span>
<span class="k">end</span>

<span class="c1"># Return array of arrays being a pascal triangle till *num* no of rows</span>
<span class="k">def</span> <span class="nf">pascal</span><span class="p">(</span><span class="n">num</span><span class="p">)</span>
  <span class="n">pascal</span> <span class="o">=</span> <span class="o">[[</span><span class="mi">1</span><span class="o">]</span><span class="p">,</span> <span class="o">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="o">]]</span>
  <span class="p">(</span><span class="n">num</span> <span class="o">-</span> <span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">times</span> <span class="k">do</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="o">[]</span>
    <span class="p">(</span><span class="n">pascal</span><span class="o">.</span><span class="n">last</span><span class="o">.</span><span class="n">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">times</span> <span class="k">do</span> <span class="o">|</span><span class="n">i</span><span class="o">|</span>
      <span class="n">ret</span> <span class="o">&lt;&lt;</span> <span class="n">pascal</span><span class="o">.</span><span class="n">last</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">+</span> <span class="n">pascal</span><span class="o">.</span><span class="n">last</span><span class="o">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="o">]</span>
    <span class="k">end</span>
    <span class="n">pascal</span><span class="o">.</span><span class="n">push</span> <span class="o">[</span><span class="mi">1</span><span class="p">,</span> <span class="n">ret</span><span class="p">,</span> <span class="mi">1</span><span class="o">].</span><span class="n">flatten</span>
  <span class="k">end</span>
  <span class="n">pascal</span>
<span class="k">end</span>

<span class="c1"># Reverse the order of words in a sentence</span>
<span class="k">def</span> <span class="nf">reverse_sentence</span><span class="p">(</span><span class="n">str</span><span class="p">)</span>
  <span class="n">str</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">)</span><span class="o">.</span><span class="n">reverse</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">)</span>
<span class="k">end</span></code></pre></div>


<p>Testing is an intergral part of programming. From a full fledged Rails application to a simple script, accompanying specs helps in increasing the confidence of your code.</p>

<p>I love rspec. It is a simple, behaviour driven testing framework.</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="nb">require</span> <span class="s1">&#39;rspec&#39;</span>
<span class="nb">require</span> <span class="s1">&#39;./test.rb&#39;</span>

<span class="n">describe</span> <span class="s1">&#39;prime?&#39;</span> <span class="k">do</span>
  <span class="n">context</span> <span class="s1">&#39;when the number is prime&#39;</span> <span class="k">do</span>
    <span class="n">it</span> <span class="p">{</span> <span class="n">expect</span><span class="p">(</span><span class="n">prime?</span><span class="p">(</span><span class="mi">13</span><span class="p">))</span><span class="o">.</span><span class="n">to</span> <span class="n">be</span> <span class="kp">true</span> <span class="p">}</span>
  <span class="k">end</span>

  <span class="n">context</span> <span class="s1">&#39;when the number is not prime&#39;</span> <span class="k">do</span>
    <span class="n">it</span> <span class="p">{</span> <span class="n">expect</span><span class="p">(</span><span class="n">prime?</span><span class="p">(</span><span class="mi">21</span><span class="p">))</span><span class="o">.</span><span class="n">to</span> <span class="n">be</span> <span class="kp">false</span> <span class="p">}</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="n">describe</span> <span class="s1">&#39;factorial&#39;</span> <span class="k">do</span>
  <span class="n">context</span> <span class="s1">&#39;when number is positive&#39;</span> <span class="k">do</span>
    <span class="n">it</span> <span class="p">{</span> <span class="n">expect</span><span class="p">(</span><span class="n">factorial</span><span class="p">(</span><span class="mi">5</span><span class="p">))</span><span class="o">.</span><span class="n">to</span> <span class="n">eq</span><span class="p">(</span><span class="mi">120</span><span class="p">)</span> <span class="p">}</span>
  <span class="k">end</span>

  <span class="n">context</span> <span class="s1">&#39;when number is zero&#39;</span> <span class="k">do</span>
    <span class="n">it</span> <span class="p">{</span> <span class="n">expect</span><span class="p">(</span><span class="n">factorial</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span><span class="o">.</span><span class="n">to</span> <span class="n">eq</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="p">}</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="n">describe</span> <span class="s1">&#39;fibonnaci&#39;</span> <span class="k">do</span>
  <span class="n">context</span> <span class="s1">&#39;when a number is given&#39;</span> <span class="k">do</span>
    <span class="n">it</span> <span class="p">{</span> <span class="n">expect</span><span class="p">(</span><span class="n">fibonnaci</span><span class="p">(</span><span class="mi">5</span><span class="p">))</span><span class="o">.</span><span class="n">to</span> <span class="n">eql</span><span class="p">(</span><span class="o">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="o">]</span><span class="p">)</span> <span class="p">}</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="n">describe</span> <span class="s1">&#39;palindrome?&#39;</span> <span class="k">do</span>
  <span class="n">context</span> <span class="s1">&#39;when the given number is a palindrome in binary&#39;</span> <span class="k">do</span>
    <span class="n">it</span> <span class="p">{</span> <span class="n">expect</span><span class="p">(</span><span class="n">palindrome?</span><span class="p">(</span><span class="mi">7</span><span class="p">))</span><span class="o">.</span><span class="n">to</span> <span class="n">be</span> <span class="kp">true</span> <span class="p">}</span>
  <span class="k">end</span>

  <span class="n">context</span> <span class="s1">&#39;when the given number is not a palindrome in binary&#39;</span> <span class="k">do</span>
    <span class="n">it</span> <span class="p">{</span> <span class="n">expect</span><span class="p">(</span><span class="n">palindrome?</span><span class="p">(</span><span class="mi">6</span><span class="p">))</span><span class="o">.</span><span class="n">to</span> <span class="n">be</span> <span class="kp">false</span> <span class="p">}</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="n">describe</span> <span class="s1">&#39;pascal&#39;</span> <span class="k">do</span>
  <span class="n">it</span> <span class="s1">&#39;should return an array of arrays of pascal triangle&#39;</span> <span class="k">do</span>
    <span class="n">expect</span><span class="p">(</span><span class="n">pascal</span><span class="p">(</span><span class="mi">3</span><span class="p">))</span><span class="o">.</span><span class="n">to</span> <span class="n">eql</span><span class="p">(</span><span class="o">[[</span><span class="mi">1</span><span class="o">]</span><span class="p">,</span> <span class="o">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="o">]</span><span class="p">,</span> <span class="o">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="o">]]</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="n">describe</span> <span class="s1">&#39;reverse_sentence&#39;</span> <span class="k">do</span>
  <span class="n">let</span><span class="p">(</span><span class="ss">:sentence</span><span class="p">)</span> <span class="p">{</span> <span class="s1">&#39;My name is Yatish&#39;</span> <span class="p">}</span>
  <span class="n">let</span><span class="p">(</span><span class="ss">:reverse</span><span class="p">)</span>  <span class="p">{</span> <span class="s1">&#39;Yatish is name My&#39;</span> <span class="p">}</span>
  <span class="n">it</span> <span class="s1">&#39;should return the reverse of the sentence&#39;</span> <span class="k">do</span>
    <span class="n">expect</span><span class="p">(</span><span class="n">reverse_sentence</span><span class="p">(</span><span class="n">sentence</span><span class="p">))</span><span class="o">.</span><span class="n">to</span> <span class="n">eq</span><span class="p">(</span><span class="n">reverse</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span></code></pre></div>


<p>Ruby programming language is clean and simple. This makes it popular among the novice programmers.</p>


<div class="keep-in-touch">
  <p>
    If you'd like to keep in touch, I tweet <a href="https://twitter.com/yatish27">@yatish27</a> on Twitter. Feel free to
    give a shout out.
  </p>
</div>

<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES * * */
    var disqus_shortname = 'yatishmehtablog';

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>

</div><!-- /.main -->

<script src="/assets/app-d1fb983d586cf0d289245a2e67a4fac5.js"></script>

</body>
</html>
